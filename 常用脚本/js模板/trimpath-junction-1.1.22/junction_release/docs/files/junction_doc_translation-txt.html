<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN" "http://www.w3.org/TR/REC-html40/strict.dtd">

<html><head><title>Translations</title><link rel="stylesheet" type="text/css" href="../styles/main.css"><script language=JavaScript src="../javascript/main.js"></script></head><body class=UnframedPage onLoad="NDOnLoad()"><script language=JavaScript><!--
if (browserType) {document.write("<div class=" + browserType + ">");if (browserVer) {document.write("<div class=" + browserVer + ">"); }}// --></script>

<!--  Generated by Natural Docs, version 1.35 -->
<!--  http://www.naturaldocs.org  -->

<!-- saved from url=(0026)http://www.naturaldocs.org -->

<table border=0 cellspacing=0 cellpadding=0 width=100%><tr><td class=MenuSection valign=top><!--START_ND_MENU--><div class=MEntry><div class=MFile><a href="junction_doc_about-txt.html">About TrimPath Junction</a></div></div><div class=MEntry><div class=MFile><a href="junction_doc_run-txt.html">Runtime Environments</a></div></div><div class=MEntry><div class=MFile><a href="junction_doc_run_browser-txt.html">Runtime In The Browser</a></div></div><div class=MEntry><div class=MFile><a href="junction_doc_run_server-txt.html">Runtime On The Server</a></div></div><div class=MEntry><div class=MFile><a href="junction_doc_sync-txt.html">Synchronization</a></div></div><div class=MEntry><div class=MFile id=MSelected>Translations</div></div><div class=MEntry><div class=MFile><a href="junction-js.html">TrimPath.<span class=HB> </span>junction</a></div></div><div class=MEntry><div class=MFile><a href="junctionClient-js.html">TrimPath.<span class=HB> </span>junctionClient</a></div></div><div class=MEntry><div class=MFile><a href="junctionHelpers-js.html">TrimPath.<span class=HB> </span>junctionHelpers</a></div></div><div class=MEntry><div class=MFile><a href="junctionUtil-js.html">TrimPath.<span class=HB> </span>junctionUtil</a></div></div><div class=MEntry><div class=MFile><a href="junction_doc_controller-txt.html">web-MVC Controller</a></div></div><div class=MEntry><div class=MFile><a href="junction_doc_model-txt.html">web-MVC Model</a></div></div><div class=MEntry><div class=MFile><a href="junction_doc_view-txt.html">web-MVC View</a></div></div><div class=MEntry><div class=MGroup><a href="javascript:ToggleMenu('MGroupContent1')">Index</a><div class=MGroupContent id=MGroupContent1><div class=MEntry><div class=MIndex><a href="../index/General.html">Everything</a></div></div><div class=MEntry><div class=MIndex><a href="../index/Classes.html">Classes</a></div></div><div class=MEntry><div class=MIndex><a href="../index/Functions.html">Functions</a></div></div><div class=MEntry><div class=MIndex><a href="../index/Variables.html">Variables</a></div></div><div class=MEntry><div class=MIndex><a href="../index/Properties.html">Properties</a></div></div></div></div></div><!--END_ND_MENU--></td>

<td class=ContentSection valign=top><div class=CGeneric id=MainTopic><div class=CTopic><h1 class=CTitle><a name="Translations"></a>Translations</h1><div class=CBody><p class=CParagraph>The Junction framework provides a simple facility for translating your application&rsquo;s response pages and output.&nbsp;  Junction always defaults to the UTF-8 charset.</p><p class=CParagraph>Developers may call the res.setLocale() method to set a locale string for every request.&nbsp;  This is often done in a beforeFilter function that you register with Junction, where Junction will invoke your registered filter function before invoking the Controller&rsquo;s action method.</p><p class=CParagraph>For example, here is a common type of filter function that calls res.setLocale() using either a request parameter, or a session value, or a default locale value...</p><blockquote><pre class=CCode>setLocaleFilter = function(controller, req, res) {<br>    var defaultLocale = 'en';<br>    var locale = req.session.locale =<br>        req.locale || req.session.locale || defaultLocale;<br>    try {<br>        res.setLocale(locale);<br>    } catch (ex) {<br>        res.setLocale(defaultLocale);<br>    }<br>}</pre></blockquote><p class=CParagraph>You can register such a function as a &lsquo;before&rsquo; request filter by calling the beforeFilter() Junction API call...</p><blockquote><pre class=CCode>ForumController = function() {}<br>beforeFilter(ForumController, setLocaleFilter);</pre></blockquote><blockquote><pre class=CCode>UserController = function() {}<br>beforeFilter(UserController, setLocaleFilter);</pre></blockquote><h4 class=CHeading>Translating Entire View Templates</h4><p class=CParagraph>Your View templates may be named following a templateName[.locale].[est|jst] pattern, where the locale is optionally part of the file name suffix.&nbsp;  The Junction system will load the right template depending on the current locale that was set using res.setLocale().&nbsp;  For example, some possible template file paths might be...</p><ul class=CBulletList><li>code/app/views/forum/show.es.est</li><li>code/app/views/forum/show.de.est</li><li>code/app/views/forum/show.est // This is the default template if Junction cannot find a matching locale.</li></ul><h4 class=CHeading>Translating Individual Strings</h4><p class=CParagraph>Alternatively, in your View template, you may have individual strings translated using the t() function.&nbsp;  For example...</p><blockquote><pre class=CCode>&lt;%= t('Welcome') %&gt; &lt;%= user.name %&gt;</pre></blockquote><p class=CParagraph>The t() function is only available in View templates, and is accessible to the controller code via res.t().</p><p class=CParagraph>Junction also provides a String.prototype.t() function, so that you can translate an individual string anywhere.&nbsp;  It&rsquo;s usage is...</p><blockquote><pre class=CCode>var holaString = &quot;Hello&quot;.t()</pre></blockquote><h4 class=CHeading>Translation Files</h4><p class=CParagraph>Developers can provide translation *.js files under the code/translations directory, one for each locale string.&nbsp;  For example, some file names might be...</p><ul class=CBulletList><li>code/translations/es.js</li><li>code/translations/de.js</li></ul><p class=CParagraph>The contents of a translations file, such as code/translations/es.js, looks like...</p><blockquote><pre class=CCode>TRANSLATIONS.es = {<br>  'Welcome' : 'Bienvenido',<br>  'hello'   : 'hola'<br>}</pre></blockquote><p class=CParagraph>And code/translations/de.js might contain...</p><blockquote><pre class=CCode>TRANSLATIONS.de = {<br>  'Welcome' : 'Willkommen',<br>  'hello'   : 'guten tag'<br>}</pre></blockquote><p class=CParagraph>At runtime, depending the setting of the current res.setLocale() string, the correct translation .js file is loaded by the Junction system.</p><p class=CParagraph>Any string that is not found within the TRANSLATIONS map will be returned by the t() function as-is.&nbsp;  For example, given the above translation files, calling...</p><blockquote><pre class=CCode>&lt;h3&gt; &lt;%= t('Goodbye, you are now logged out.') %&gt; &lt;/h3&gt;</pre></blockquote><p class=CParagraph>Will produce...</p><blockquote><pre class=CCode>&lt;h4&gt; Goodbye, you are now logged out. &lt;/h3&gt;</pre></blockquote><p class=CParagraph>Since the &ldquo;Goodbye...&rdquo; string has no translation defined yet.</p><p class=CParagraph>Also, &ldquo;Goodbye&rdquo;.t() will return &ldquo;Goodbye&rdquo;.</p></div></div></div>

</td>

</tr></table><div class=Footer><!--START_ND_FOOTER-->Generated by <a href="http://www.naturaldocs.org">Natural Docs</a><!--END_ND_FOOTER--></div>
<!--START_ND_TOOLTIPS-->
<!--END_ND_TOOLTIPS-->

<script language=JavaScript><!--
if (browserType) {if (browserVer) {document.write("</div>"); }document.write("</div>");}// --></script></body></html>